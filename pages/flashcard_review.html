<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Tracker - Flashcard Review</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body class="bg-background dark:bg-background-dark text-text-primary dark:text-text-primary-dark min-h-screen flex flex-col">
    <!-- Header Navigation -->
    <header class="bg-surface dark:bg-surface-dark border-b border-border dark:border-border-dark sticky top-0 z-10">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <img src="https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Study Tracker Logo" class="h-8 w-8 rounded-md" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                <h1 class="text-xl font-bold">Study Tracker</h1>
            </div>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="dashboard.html" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Dashboard</a>
                <a href="flashcard_creation.html" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Create Flashcards</a>
                <a href="flashcard_review.html" class="text-primary font-medium" aria-current="page">Review</a>
                <a href="basic_analytics.html" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Analytics</a>
            </nav>
            <div class="flex items-center space-x-3">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary">
                    <!-- Sun icon for dark mode (shown when in dark mode) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    <!-- Moon icon for light mode (shown when in light mode) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                </button>
                <div class="relative">
                    <button id="user-menu" class="flex items-center space-x-2 focus:outline-none">
                        <div class="w-8 h-8 rounded-full bg-primary-light dark:bg-primary-800 flex items-center justify-center text-primary dark:text-primary-200 font-medium">
                            JS
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-6">
        <!-- Deck Selection (shown when no deck is selected) -->
        <div id="deck-selection" class="mb-6">
            <div class="flex items-center justify-between mb-6">
                <h1 class="heading-1 dark:text-text-primary-dark">Flashcard Review</h1>
                <div class="flex items-center space-x-3">
                    <button id="deck-select-btn" class="btn-secondary inline-flex items-center py-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                        Select Deck
                    </button>
                    <button id="settings-btn" class="p-2 rounded-full hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-text-secondary dark:text-text-secondary-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Deck Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4">
                <!-- Deck 1 -->
                <div class="card-interactive p-4" data-deck-id="1">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">Chemistry</span>
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-error bg-opacity-20 dark:bg-opacity-20 text-error rounded">Due: 42 cards</span>
                    </div>
                    <h3 class="heading-4 mb-1">Organic Chemistry: Functional Groups</h3>
                    <p class="text-text-secondary dark:text-text-secondary-dark text-sm mb-3">Learn about the different types of functional groups in organic chemistry and their properties.</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-text-secondary dark:text-text-secondary-dark">Mastery: 65%</span>
                        <button class="btn-primary px-4 py-1 text-sm">Start Review</button>
                    </div>
                </div>

                <!-- Deck 2 -->
                <div class="card-interactive p-4" data-deck-id="2">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">Programming</span>
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-warning bg-opacity-20 dark:bg-opacity-20 text-warning rounded">Due: 18 cards</span>
                    </div>
                    <h3 class="heading-4 mb-1">JavaScript: Promises & Async/Await</h3>
                    <p class="text-text-secondary dark:text-text-secondary-dark text-sm mb-3">Master asynchronous programming in JavaScript with Promises and async/await syntax.</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-text-secondary dark:text-text-secondary-dark">Mastery: 72%</span>
                        <button class="btn-primary px-4 py-1 text-sm">Start Review</button>
                    </div>
                </div>

                <!-- Deck 3 -->
                <div class="card-interactive p-4" data-deck-id="3">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">Languages</span>
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-text-secondary bg-opacity-20 dark:bg-opacity-20 text-text-secondary dark:text-text-secondary-dark rounded">Due tomorrow</span>
                    </div>
                    <h3 class="heading-4 mb-1">Spanish Verb Conjugations</h3>
                    <p class="text-text-secondary dark:text-text-secondary-dark text-sm mb-3">Practice regular and irregular Spanish verb conjugations in different tenses.</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-text-secondary dark:text-text-secondary-dark">Mastery: 59%</span>
                        <button class="btn-primary px-4 py-1 text-sm">Start Review</button>
                    </div>
                </div>

                <!-- Deck 4 -->
                <div class="card-interactive p-4" data-deck-id="4">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">History</span>
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-text-secondary bg-opacity-20 dark:bg-opacity-20 text-text-secondary dark:text-text-secondary-dark rounded">Due in 2 days</span>
                    </div>
                    <h3 class="heading-4 mb-1">World History: Renaissance Period</h3>
                    <p class="text-text-secondary dark:text-text-secondary-dark text-sm mb-3">Study the key events, figures, and developments of the European Renaissance period.</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-text-secondary dark:text-text-secondary-dark">Mastery: 48%</span>
                        <button class="btn-primary px-4 py-1 text-sm">Start Review</button>
                    </div>
                </div>

                <!-- Deck 5 -->
                <div class="card-interactive p-4" data-deck-id="5">
                    <div class="flex justify-between items-start mb-2">
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">Mathematics</span>
                        <span class="inline-block px-2 py-1 text-xs font-medium bg-text-secondary bg-opacity-20 dark:bg-opacity-20 text-text-secondary dark:text-text-secondary-dark rounded">Due in 3 days</span>
                    </div>
                    <h3 class="heading-4 mb-1">Calculus: Integration Techniques</h3>
                    <p class="text-text-secondary dark:text-text-secondary-dark text-sm mb-3">Learn various methods for solving integration problems in calculus.</p>
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-text-secondary dark:text-text-secondary-dark">Mastery: 55%</span>
                        <button class="btn-primary px-4 py-1 text-sm">Start Review</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flashcard Review Interface (hidden initially) -->
        <div id="review-interface" class="hidden">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                    <button id="back-to-decks" class="mr-3 p-2 rounded-full hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h1 class="heading-1 dark:text-text-primary-dark" id="deck-title">JavaScript: Promises & Async/Await</h1>
                </div>
                <div class="flex items-center">
                    <span class="text-text-secondary dark:text-text-secondary-dark mr-4">
                        Card <span id="current-card">1</span> of <span id="total-cards">18</span>
                    </span>
                    <button id="review-settings" class="p-2 rounded-full hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-text-secondary dark:text-text-secondary-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="relative pt-1 mb-6">
                <div class="overflow-hidden h-2 text-xs flex rounded bg-primary-light dark:bg-primary-900 dark:bg-opacity-30">
                    <div id="progress-bar" style="width:5.5%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-primary"></div>
                </div>
            </div>

            <!-- Flashcard -->
            <div class="max-w-3xl mx-auto">
                <div id="flashcard" class="bg-white dark:bg-surface-dark rounded-lg shadow-lg overflow-hidden cursor-pointer transform transition-all duration-300 h-64 md:h-80 border border-border dark:border-border-dark relative perspective">
                    <!-- Front side (question) -->
                    <div id="card-front" class="absolute inset-0 p-6 flex flex-col backface-hidden">
                        <div class="mb-3 flex justify-between">
                            <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">JavaScript</span>
                            <span class="text-text-secondary dark:text-text-secondary-dark text-sm">Question</span>
                        </div>
                        <div class="flex-grow flex items-center justify-center">
                            <h2 class="text-xl md:text-2xl font-medium text-center">What are JavaScript Promises and how do they differ from callbacks?</h2>
                        </div>
                        <div class="text-center text-text-secondary dark:text-text-secondary-dark text-sm mt-3">
                            Click to flip card
                        </div>
                    </div>

                    <!-- Back side (answer) -->
                    <div id="card-back" class="absolute inset-0 p-6 flex flex-col backface-hidden rotate-y-180 bg-primary-50 dark:bg-primary-900 dark:bg-opacity-20">
                        <div class="mb-3 flex justify-between">
                            <span class="inline-block px-2 py-1 text-xs font-medium bg-primary-light dark:bg-primary-900 text-primary rounded">JavaScript</span>
                            <span class="text-text-secondary dark:text-text-secondary-dark text-sm">Answer</span>
                        </div>
                        <div class="flex-grow overflow-y-auto">
                            <div class="text-lg md:text-xl">
                                <p class="mb-3">Promises are objects that represent the eventual completion or failure of an asynchronous operation.</p>
                                <p class="mb-3">Key differences from callbacks:</p>
                                <ul class="list-disc pl-5 mb-3">
                                    <li>Allow for chaining with <code>.then()</code> instead of nested callbacks</li>
                                    <li>Better error handling with <code>.catch()</code></li>
                                    <li>Avoid "callback hell" or "pyramid of doom"</li>
                                    <li>Support for Promise.all() and Promise.race() for multiple async operations</li>
                                </ul>
                            </div>
                        </div>
                        <div class="text-center text-text-secondary dark:text-text-secondary-dark text-sm mt-3">
                            Click to flip back
                        </div>
                    </div>
                </div>

                <!-- Confidence Rating (Hidden until card is flipped) -->
                <div id="confidence-rating" class="hidden mt-6 max-w-3xl mx-auto">
                    <h3 class="text-lg font-medium mb-3 text-center">How well did you know this?</h3>
                    <div class="flex justify-between space-x-3">
                        <button class="flex-1 py-4 border border-mastery-low text-mastery-low rounded-md hover:bg-mastery-low hover:bg-opacity-20 transition-colors" data-rating="1">
                            <div class="text-center">
                                <div class="font-semibold">Forgot</div>
                                <div class="text-xs mt-1 text-text-secondary dark:text-text-secondary-dark">Review soon</div>
                            </div>
                        </button>
                        <button class="flex-1 py-4 border border-mastery-medium text-mastery-medium rounded-md hover:bg-mastery-medium hover:bg-opacity-20 transition-colors" data-rating="2">
                            <div class="text-center">
                                <div class="font-semibold">Hard</div>
                                <div class="text-xs mt-1 text-text-secondary dark:text-text-secondary-dark">Somewhat knew it</div>
                            </div>
                        </button>
                        <button class="flex-1 py-4 border border-mastery-medium text-mastery-medium rounded-md hover:bg-mastery-medium hover:bg-opacity-20 transition-colors" data-rating="3">
                            <div class="text-center">
                                <div class="font-semibold">Medium</div>
                                <div class="text-xs mt-1 text-text-secondary dark:text-text-secondary-dark">Hesitated briefly</div>
                            </div>
                        </button>
                        <button class="flex-1 py-4 border border-mastery-high text-mastery-high rounded-md hover:bg-mastery-high hover:bg-opacity-20 transition-colors" data-rating="4">
                            <div class="text-center">
                                <div class="font-semibold">Easy</div>
                                <div class="text-xs mt-1 text-text-secondary dark:text-text-secondary-dark">Knew right away</div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Flashcard Navigation -->
                <div class="flex justify-between items-center mt-6 max-w-3xl mx-auto">
                    <button id="prev-card" class="flex items-center justify-center p-2 rounded-md hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 disabled:cursor-default disabled:hover:bg-transparent" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                        <span class="ml-1">Previous</span>
                    </button>

                    <button id="flip-card" class="btn-secondary">
                        Flip Card
                    </button>

                    <button id="next-card" class="flex items-center justify-center p-2 rounded-md hover:bg-primary-light dark:hover:bg-surface-dark transition-colors focus:outline-none focus:ring-2 focus:ring-primary" disabled>
                        <span class="mr-1">Next</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Review Complete Interface (hidden initially) -->
        <div id="review-complete" class="hidden max-w-3xl mx-auto text-center py-8">
            <div class="mb-6">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-success bg-opacity-20 text-success mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                </div>
                <h2 class="heading-1 mb-2">Review Complete!</h2>
                <p class="text-text-secondary dark:text-text-secondary-dark text-lg mb-4">Great job! You've completed your flashcard review session.</p>
            </div>

            <!-- Performance Summary -->
            <div class="card p-6 mb-6">
                <h3 class="heading-3 mb-4">Your Performance</h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <div class="p-3 border border-border dark:border-border-dark rounded-md">
                        <div class="text-sm text-text-secondary dark:text-text-secondary-dark mb-1">Cards Reviewed</div>
                        <div id="cards-reviewed" class="text-2xl font-bold">18</div>
                    </div>
                    <div class="p-3 border border-border dark:border-border-dark rounded-md">
                        <div class="text-sm text-text-secondary dark:text-text-secondary-dark mb-1">Time Spent</div>
                        <div id="time-spent" class="text-2xl font-bold">9:32</div>
                    </div>
                    <div class="p-3 border border-border dark:border-border-dark rounded-md">
                        <div class="text-sm text-text-secondary dark:text-text-secondary-dark mb-1">Success Rate</div>
                        <div id="success-rate" class="text-2xl font-bold">72%</div>
                    </div>
                    <div class="p-3 border border-border dark:border-border-dark rounded-md">
                        <div class="text-sm text-text-secondary dark:text-text-secondary-dark mb-1">Next Review</div>
                        <div id="next-review" class="text-2xl font-bold">Tomorrow</div>
                    </div>
                </div>

                <!-- Difficulty Breakdown -->
                <h4 class="font-medium mb-2">Difficulty Breakdown</h4>
                <div class="relative pt-1 mb-4">
                    <div class="flex h-4 overflow-hidden text-xs rounded">
                        <div id="easy-percent" style="width: 40%" class="bg-mastery-high text-white text-center"></div>
                        <div id="medium-percent" style="width: 35%" class="bg-mastery-medium text-white text-center"></div>
                        <div id="hard-percent" style="width: 15%" class="bg-warning text-white text-center"></div>
                        <div id="forgot-percent" style="width: 10%" class="bg-mastery-low text-white text-center"></div>
                    </div>
                    <div class="flex text-xs justify-between mt-1">
                        <span><span class="inline-block w-3 h-3 mr-1 bg-mastery-high"></span> Easy (40%)</span>
                        <span><span class="inline-block w-3 h-3 mr-1 bg-mastery-medium"></span> Medium (35%)</span>
                        <span><span class="inline-block w-3 h-3 mr-1 bg-warning"></span> Hard (15%)</span>
                        <span><span class="inline-block w-3 h-3 mr-1 bg-mastery-low"></span> Forgot (10%)</span>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col md:flex-row justify-center space-y-3 md:space-y-0 md:space-x-4">
                <a href="flashcard_review.html" class="btn-primary">
                    Review Another Deck
                </a>
                <a href="dashboard.html" class="btn-secondary">
                    Return to Dashboard
                </a>
                <a href="basic_analytics.html" class="btn-tertiary">
                    View Detailed Analytics
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface dark:bg-surface-dark border-t border-border dark:border-border-dark py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <img src="https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Study Tracker Logo" class="h-8 w-8 rounded-md mr-2" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                    <span class="text-lg font-bold">Study Tracker</span>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Help</a>
                    <a href="#" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Privacy</a>
                    <a href="#" class="text-text-secondary dark:text-text-secondary-dark hover:text-primary dark:hover:text-primary transition-colors">Terms</a>
                </div>
            </div>
            <div class="mt-6 text-center md:text-left text-sm text-text-secondary dark:text-text-secondary-dark">
                © 2025 Study Tracker. All Rights Reserved.
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle functionality
            const themeToggle = document.getElementById('theme-toggle');
            
            // Check for saved theme preference or use system preference
            const savedTheme = localStorage.getItem('theme') || 
                (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            
            // Apply the theme
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            
            // Toggle theme when button is clicked
            themeToggle.addEventListener('click', () => {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                }
            });

            // Elements
            const deckSelection = document.getElementById('deck-selection');
            const reviewInterface = document.getElementById('review-interface');
            const reviewComplete = document.getElementById('review-complete');
            const flashcard = document.getElementById('flashcard');
            const cardFront = document.getElementById('card-front');
            const cardBack = document.getElementById('card-back');
            const confidenceRating = document.getElementById('confidence-rating');
            const prevCardBtn = document.getElementById('prev-card');
            const nextCardBtn = document.getElementById('next-card');
            const flipCardBtn = document.getElementById('flip-card');
            const backToDecksBtn = document.getElementById('back-to-decks');
            const progressBar = document.getElementById('progress-bar');
            const currentCardEl = document.getElementById('current-card');
            const totalCardsEl = document.getElementById('total-cards');
            
            // State variables
            let currentDeck = null;
            let currentCardIndex = 0;
            let totalCards = 18; // This would come from the selected deck
            let isCardFlipped = false;
            let cardsReviewed = 0;
            let reviewStartTime = null;
            
            // Sample flashcards data (would be fetched from IndexedDB in a real app)
            const flashcards = [
                {
                    id: 1,
                    question: "What are JavaScript Promises and how do they differ from callbacks?",
                    answer: "<p class='mb-3'>Promises are objects that represent the eventual completion or failure of an asynchronous operation.</p><p class='mb-3'>Key differences from callbacks:</p><ul class='list-disc pl-5 mb-3'><li>Allow for chaining with <code>.then()</code> instead of nested callbacks</li><li>Better error handling with <code>.catch()</code></li><li>Avoid \"callback hell\" or \"pyramid of doom\"</li><li>Support for Promise.all() and Promise.race() for multiple async operations</li></ul>",
                    subject: "JavaScript",
                    difficulty: "medium",
                    lastReviewed: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000), // 5 days ago
                    nextReview: new Date(Date.now()),
                    repetitionCount: 3,
                    easeFactor: 2.5
                },
                {
                    id: 2,
                    question: "Explain the async/await syntax in JavaScript and how it works with Promises.",
                    answer: "<p class='mb-3'>Async/await is syntactic sugar built on top of Promises, making asynchronous code look more like synchronous code.</p><p class='mb-3'>Key points:</p><ul class='list-disc pl-5 mb-3'><li>Functions marked with <code>async</code> always return a Promise</li><li>The <code>await</code> keyword can only be used inside an async function</li><li>When <code>await</code> is used with a Promise, it pauses execution until the Promise resolves</li><li>Errors can be caught using try/catch blocks</li><li>It's still using Promises under the hood</li></ul>",
                    subject: "JavaScript",
                    difficulty: "hard",
                    lastReviewed: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // 7 days ago
                    nextReview: new Date(Date.now()),
                    repetitionCount: 2,
                    easeFactor: 2.2
                }
                // More cards would be here in a real app
            ];
            
            // Initialize UI
            function updateProgressBar() {
                const progress = ((currentCardIndex + 1) / totalCards) * 100;
                progressBar.style.width = `${progress}%`;
                currentCardEl.textContent = currentCardIndex + 1;
                totalCardsEl.textContent = totalCards;
            }
            
            // Flip card functionality
            function flipCard() {
                isCardFlipped = !isCardFlipped;
                
                if (isCardFlipped) {
                    // Show the back (answer) side
                    flashcard.classList.add('rotate-y-180');
                    // Show confidence rating after a short delay
                    setTimeout(() => {
                        confidenceRating.classList.remove('hidden');
                        nextCardBtn.disabled = false; // Enable next button after flip
                    }, 300);
                } else {
                    // Show the front (question) side
                    flashcard.classList.remove('rotate-y-180');
                    // Hide confidence rating
                    confidenceRating.classList.add('hidden');
                    nextCardBtn.disabled = true; // Disable next button until card is flipped
                }
            }
            
            // Load flashcard data
            function loadCard(index) {
                // In a real app, this would fetch from IndexedDB
                if (index < flashcards.length) {
                    const card = flashcards[index];
                    
                    // Update front of card
                    const frontContent = cardFront.querySelector('.flex-grow');
                    frontContent.innerHTML = `<h2 class="text-xl md:text-2xl font-medium text-center">${card.question}</h2>`;
                    
                    // Update subject tag
                    const subjectTag = cardFront.querySelector('.inline-block');
                    subjectTag.textContent = card.subject;
                    
                    // Update back of card
                    const backContent = cardBack.querySelector('.flex-grow div');
                    backContent.innerHTML = card.answer;
                    
                    // Update subject tag on back
                    const backSubjectTag = cardBack.querySelector('.inline-block');
                    backSubjectTag.textContent = card.subject;
                    
                    // Reset card state
                    isCardFlipped = false;
                    flashcard.classList.remove('rotate-y-180');
                    confidenceRating.classList.add('hidden');
                    nextCardBtn.disabled = true;
                    
                    // Update navigation buttons
                    prevCardBtn.disabled = index === 0;
                    
                    // Update progress
                    updateProgressBar();
                }
            }
            
            // Move to next card
            function nextCard() {
                if (currentCardIndex < totalCards - 1) {
                    currentCardIndex++;
                    loadCard(currentCardIndex);
                    cardsReviewed++;
                    
                    // If this was the last card, show review complete
                    if (currentCardIndex === totalCards - 1) {
                        // In a real app, would save review session data here
                        setTimeout(() => {
                            showReviewComplete();
                        }, 500);
                    }
                }
            }
            
            // Move to previous card
            function prevCard() {
                if (currentCardIndex > 0) {
                    currentCardIndex--;
                    loadCard(currentCardIndex);
                }
            }
            
            // Handle confidence rating
            function rateConfidence(rating) {
                // In a real app, this would update the spaced repetition algorithm
                console.log(`Card rated: ${rating}`);
                
                // Apply spaced repetition algorithm (simplified version)
                let interval;
                let easeFactor;
                const card = flashcards[currentCardIndex];
                
                switch(rating) {
                    case 1: // Forgot
                        interval = 1; // 1 day
                        easeFactor = Math.max(1.3, card.easeFactor - 0.3);
                        break;
                    case 2: // Hard
                        interval = 3; // 3 days
                        easeFactor = Math.max(1.3, card.easeFactor - 0.15);
                        break;
                    case 3: // Medium
                        interval = 5; // 5 days
                        easeFactor = card.easeFactor;
                        break;
                    case 4: // Easy
                        interval = 7; // 7 days
                        easeFactor = card.easeFactor + 0.15;
                        break;
                }
                
                // Update card data (would save to IndexedDB in real app)
                card.easeFactor = easeFactor;
                card.repetitionCount += 1;
                card.lastReviewed = new Date();
                card.nextReview = new Date(Date.now() + interval * 24 * 60 * 60 * 1000);
                
                // Move to next card
                nextCard();
            }
            
            // Show review complete screen
            function showReviewComplete() {
                reviewInterface.classList.add('hidden');
                reviewComplete.classList.remove('hidden');
                
                // Calculate time spent
                const endTime = new Date();
                const timeSpent = Math.floor((endTime - reviewStartTime) / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                
                // Update review complete stats
                document.getElementById('cards-reviewed').textContent = cardsReviewed;
                document.getElementById('time-spent').textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
                
                // In a real app, these values would be calculated from actual ratings
                document.getElementById('success-rate').textContent = '72%';
                document.getElementById('next-review').textContent = 'Tomorrow';
                
                // Update difficulty breakdown (would use actual data in real app)
                document.getElementById('easy-percent').style.width = '40%';
                document.getElementById('medium-percent').style.width = '35%';
                document.getElementById('hard-percent').style.width = '15%';
                document.getElementById('forgot-percent').style.width = '10%';
            }
            
            // Start review session
            function startReview(deckId) {
                // In a real app, would fetch deck data and flashcards from IndexedDB
                currentDeck = deckId;
                currentCardIndex = 0;
                cardsReviewed = 0;
                reviewStartTime = new Date();
                
                // Update UI
                deckSelection.classList.add('hidden');
                reviewInterface.classList.remove('hidden');
                reviewComplete.classList.add('hidden');
                
                // Set deck title based on deck ID (simplified for demo)
                let deckTitle = '';
                switch(deckId) {
                    case '1':
                        deckTitle = 'Organic Chemistry: Functional Groups';
                        break;
                    case '2':
                        deckTitle = 'JavaScript: Promises & Async/Await';
                        break;
                    case '3':
                        deckTitle = 'Spanish Verb Conjugations';
                        break;
                    case '4':
                        deckTitle = 'World History: Renaissance Period';
                        break;
                    case '5':
                        deckTitle = 'Calculus: Integration Techniques';
                        break;
                }
                document.getElementById('deck-title').textContent = deckTitle;
                
                // Load first card
                loadCard(currentCardIndex);
            }
            
            // Event listeners for deck selection
            document.querySelectorAll('[data-deck-id]').forEach(deck => {
                deck.addEventListener('click', function() {
                    startReview(this.getAttribute('data-deck-id'));
                });
                
                // Also make the Start Review button work
                const startBtn = deck.querySelector('.btn-primary');
                startBtn.addEventListener('click', function(e) {
                    e.stopPropagation(); // Prevent triggering the parent's click event
                    startReview(deck.getAttribute('data-deck-id'));
                });
            });
            
            // Flashcard events
            flashcard.addEventListener('click', flipCard);
            flipCardBtn.addEventListener('click', flipCard);
            prevCardBtn.addEventListener('click', prevCard);
            nextCardBtn.addEventListener('click', nextCard);
            
            // Confidence rating buttons
            document.querySelectorAll('#confidence-rating button').forEach(button => {
                button.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    rateConfidence(rating);
                });
            });
            
            // Back to decks button
            backToDecksBtn.addEventListener('click', function() {
                deckSelection.classList.remove('hidden');
                reviewInterface.classList.add('hidden');
                reviewComplete.classList.add('hidden');
            });
            
            // Add CSS for card flipping
            const style = document.createElement('style');
            style.textContent = `
                .perspective { perspective: 1000px; }
                .backface-hidden { backface-visibility: hidden; }
                .rotate-y-180 { transform: rotateY(180deg); }
                #card-front, #card-back { transition: transform 0.6s; transform-style: preserve-3d; }
                #card-back { transform: rotateY(180deg); }
                .rotate-y-180 #card-front { transform: rotateY(180deg); }
                .rotate-y-180 #card-back { transform: rotateY(0deg); }
            `;
            document.head.appendChild(style);
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
<script id="dhws-elementInspector" src="../public/dhws-web-inspector.js"></script>
<script id="dhws-errorTracker" src="../public/dhws-error-tracker.js"></script>
</body>
</html>